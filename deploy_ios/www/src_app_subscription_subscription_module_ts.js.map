{"version":3,"file":"src_app_subscription_subscription_module_ts.js","mappings":"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","sources":["./src/app/subscription/subscription-routing.module.ts","./src/app/subscription/subscription.module.ts","./src/app/subscription/subscription.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SubscriptionPage } from './subscription.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SubscriptionPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SubscriptionPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SubscriptionPageRoutingModule } from './subscription-routing.module';\n\nimport { SubscriptionPage } from './subscription.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SubscriptionPageRoutingModule\n  ],\n  declarations: [SubscriptionPage]\n})\nexport class SubscriptionPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {ToastController, NavController} from '@ionic/angular'\nimport { Subscription } from '../models/subscription';\nimport { SigninService } from '../services/sign-in.service';\nimport { SubscriptionService } from '../services/subscription.service';\nimport { AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-subscription',\n  templateUrl: './subscription.page.html',\n  styleUrls: ['./subscription.page.scss'],\n})\nexport class SubscriptionPage implements OnInit {\n  toast: any;\n  message : string;\n  sub: Subscription = new Subscription();\n  ssub: Subscription = new Subscription();\n  basicDesc : string = \"20 clips\";\n  personalDesc : string = \"500 clips <br\\> Encrypted contents\";\n  teamDesc : string = \"1000 clips <br\\> Encrypted contents <br\\> Playclips sharing\";\n  constructor(private toastCtrl : ToastController, private navCtrl: NavController, private signinService: SigninService, private subscriptionService: SubscriptionService, public alertController: AlertController) {  \n     this.ngOnInit();\n   }\n   ionViewWillEnter() {\n     this.ngOnInit();\n   }\n\n  async ngOnInit() {\n    this.signinService.getUser(this.signinService.user.login).subscribe(response => { this.signinService.user = response});\n    await this.sleep(500);  \n    this.subscriptionService.get(this.signinService.user.email).subscribe(response => { this.ssub = response});\n  }\n  basic() {\n    if (this.validate()) {\n      console.log(\"basic\");\n      this.subscriptionFunc(this.signinService.user.login, 20, \"basic\", this.signinService.user.email)\n    }\n    else\n      this.showToast(this.message);\n  }\n  personal() {\n    if (this.validate()) {\n      console.log(\"personal\");\n      this.subscriptionFunc(this.signinService.user.login, 500, \"personal\", this.signinService.user.email)\n    }\n    else\n      this.showToast(this.message);\n  }\n  personalCancel() {\n    if (this.validate()) {\n      console.log(\"personal\");\n      this.subscriptionFunc(this.signinService.user.login, 20, \"basic\", this.signinService.user.email)\n    }\n    else\n      this.showToast(this.message);\n  }\n  team() {\n    if (this.validate()) {\n      console.log(\"team\");\n      this.subscriptionFunc(this.signinService.user.login, 1000, \"team\", this.signinService.user.email)\n    }\n    else\n      this.showToast(this.message);\n  }\n\n  showToast(message : string) {\n    this.toast = this.toastCtrl.create({\n      message: message,\n      duration: 3000\n    }).then((toastData) => {\n      console.log(toastData);\n      toastData.present();\n    });\n   }\n\n   validate() {\n    console.log(this.signinService.user.email);\n    if ( this.signinService.user.email != undefined ) \n    {\n      if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(this.signinService.user.email)) {\n        return (true)\n      }\n      this.message = \"Email is not valid!\";\n      return false;\n    }\n    else {\n      this.message = \"Please ensure to enter email in profile page using left top most icon !\";\n      return false;\n    }\n  }\n  async subscriptionFunc(username:string, nclips: number, subscription: string,  email: string) {\n    this.sub.username = username;\n    this.sub.nclips = nclips;\n    this.sub.subscription = subscription;\n    this.sub.email = email;\n    console.log(username);\n    await this.presentAlert(subscription);\n  }\n  async presentAlert(subscription) {\n        const alert = await this.alertController.create({\n          header: 'Subscrible to ' + subscription + ' plan?',\n          buttons: [\n             {\n          \ttext: 'Disagree',\n          \thandler: () => {\n      \t\t\tthis.navCtrl.navigateBack(\"tabs\");\n          \t}\n             },\n             {\n          \ttext: 'Agree',\n          \thandler: () => {\n      \t\t\tthis.showToast(\"Subscribing to \" + subscription + \" plan'\");\n    \t\t\tthis.subscriptionService.deleteSubscription(this.signinService.user.email);\n    \t\t\tconsole.log(\"deleted sub\");\n    \t\t\tthis.subscriptionService.createSubscription(this.sub).subscribe((response) => {\n      \t\t\tconsole.log(\"subscription created\");\n      \t\t\tthis.subscriptionService.get(this.signinService.user.email).subscribe(response => { this.ssub = response});\n    \t\t      });\n          \t}\n             }]\n        });\n        await alert.present();\n      }\n   sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}\n"],"names":["Component","ToastController","NavController","Subscription","SigninService","SubscriptionService","AlertController","SubscriptionPage","constructor","toastCtrl","navCtrl","signinService","subscriptionService","alertController","ngOnInit","ionViewWillEnter","getUser","user","login","subscribe","response","sleep","get","email","ssub","basic","validate","console","log","subscriptionFunc","showToast","message","personal","personalCancel","team","toast","create","duration","then","toastData","present","undefined","test","username","nclips","subscription","sub","presentAlert","alert","header","buttons","text","handler","navigateBack","deleteSubscription","createSubscription","ms","Promise","resolve","setTimeout","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}