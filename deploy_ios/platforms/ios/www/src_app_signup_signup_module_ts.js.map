{"version":3,"file":"src_app_signup_signup_module_ts.js","mappings":"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","sources":["./src/app/signup/signup-routing.module.ts","./src/app/signup/signup.module.ts","./src/app/signup/signup.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SignupPage } from './signup.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SignupPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SignupPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SignupPageRoutingModule } from './signup-routing.module';\n\nimport { SignupPage } from './signup.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SignupPageRoutingModule\n  ],\n  declarations: [SignupPage]\n})\nexport class SignupPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { User } from '../models/user';\nimport { SigninService } from '../services/sign-in.service';\nimport { Messages } from '../messages';\nimport { SubscriptionService } from '../services/subscription.service';\nimport { Subscription } from '../models/subscription';\nimport { NavController, ToastController, LoadingController } from '@ionic/angular';\nimport { Api } from '../api';\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\n\n@Component({\n  selector: 'app-signup',\n  templateUrl: './signup.page.html',\n  styleUrls: ['./signup.page.scss'],\n})\nexport class SignupPage implements OnInit {\n  data: User;\n  toast: any;\n  selectedRadioGroup: any;\n  message: string = \"Signup Error - Email used. Please try using different email.\";\n   private file: File;\n\n  constructor(private signinService: SigninService, \n    private router: Router, private toastCtrl : ToastController, \n    private subscriptionService : SubscriptionService,\n    private messages : Messages, private subscription: Subscription,\n\t    private api : Api, private http: HttpClient ,\n\t     public loadingController:LoadingController,\n\t     ) \n  {\n    this.data = new User();\n  }\n  ngOnInit() {\n  }\n\n  onFileChange(fileChangeEvent) {\n    this.file = fileChangeEvent.target.files[0];\n  }\n\n  async submitForm() {\n    this.data.role = this.signinService.role;\n    if ( this.data.login != undefined && this.data.password != undefined && this.data.rpassword != undefined ) {\n    if ( this.data.password != this.data.rpassword ) \n     this.message = this.messages.passwordMismatch\n    else\n     if (this.data.login.length < 4 && this.data.login.length > 15 ) \n      this.message = this.messages.userLenght;\n    else\n     if (this.data.password.length < 4  ) \n      this.message = this.messages.passwordLenght;\n    else\n     this.signinService.create(this.data).subscribe((response) => {\n      console.log(response.id);\n      if ( response.id == \"0\" )\n       this.message = this.messages.userExists;\n      else\n      {\n       this.router.navigate(['sign-in']);\n       this.message = this.messages.success;\n      }\n      this.showToast(this.message);\n     });\n    }\n    else \n     this.message = this.messages.undefined;\n  await this.sleep(500);\n  this.showToast(this.message);\n  this.subscription.username = this.data.login;\n  this.subscription.cnclips = 0;\n  this.subscription.nclips = 20;\n  this.subscription.email = this.data.email;\n  this.subscription.subscription = \"basic\";\n  //this.subscriptionService.createSubscription(this.subscription).subscribe((response) => {\n  //  console.log(\"subscription created\");\n  //});\n }\n showToast(message : string) {\n  this.toast = this.toastCtrl.create({\n    message: message,\n    duration: 2000\n  }).then((toastData) => {\n    console.log(toastData);\n    toastData.present();\n  });\n }\n sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n }\n async uploadFile() {\n    if ( this.file.size > 30096000 ) {\n            this.showToast(\"File size restricted to less then 30MB\");\n            return;\n    }\n    let formData = new FormData();\n    formData.append(\"file\", this.file, this.file.name);\n    let rheaders = new HttpHeaders({ 'Transfer-Encoding': 'chunked' });\n    this.presentLoading();\n    this.http.post<UploadResponse>(this.api.upload, formData, {headers: rheaders}).subscribe((response) => {\n      console.log(response);\n      console.log(response.link);\n      this.data.login = response.link;\n      this.signinService.user.login = response.link;\n      this.signinService.user.username = response.link;\n    });\n  }\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: 'Please wait...',\n      duration: 7500\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    console.log('Loading dismissed!');\n  }\n}\nclass UploadResponse {\n  link: string;\n}\n"],"names":["Component","Router","User","SigninService","Messages","SubscriptionService","Subscription","ToastController","LoadingController","Api","HttpClient","HttpHeaders","SignupPage","constructor","signinService","router","toastCtrl","subscriptionService","messages","subscription","api","http","loadingController","data","ngOnInit","onFileChange","fileChangeEvent","file","target","files","submitForm","role","login","undefined","password","rpassword","message","passwordMismatch","length","userLenght","passwordLenght","create","subscribe","response","console","log","id","userExists","navigate","success","showToast","sleep","username","cnclips","nclips","email","toast","duration","then","toastData","present","ms","Promise","resolve","setTimeout","uploadFile","size","formData","FormData","append","name","rheaders","presentLoading","post","upload","headers","link","user","loading","cssClass","onDidDismiss","selector","template","UploadResponse"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}