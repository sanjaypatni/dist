{"version":3,"file":"src_app_payment_payment_module_ts.js","mappings":"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","sources":["./src/app/models/charge.ts","./src/app/models/playclip.ts","./src/app/payment/payment-routing.module.ts","./src/app/payment/payment.module.ts","./src/app/payment/payment.page.ts","./src/app/services/payment.service.ts","./src/app/services/playclips.service.ts"],"sourcesContent":["export class Charge {\n    amount: number;\n    currency: string = \"USD\";\n    description: string;\n    stripeToken: string;\n    stripeEmail: string = \"\";\n  }\n","import { Clip } from '../models/clip';\nimport { User } from '../models/user';\nexport class Playclip {\n id : string;\n title: string = \"\";\n clips: Clip[];\n login: string = \"\";\n description: string = \"\";\n application: string = \"\";\n startDate: string = \"\";\n endDate: string = \"\";\n createdBy: string = \"\";\n createDate: string = \"\";\n thumbnail: string = \"\";\n likes: number = 0;\n archive: number = 0;\n price: number = 0.0;\n bought: number = 0;\n jwt: string;\n users: User[];\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PaymentPage } from './payment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaymentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PaymentPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PaymentPageRoutingModule } from './payment-routing.module';\n\nimport { PaymentPage } from './payment.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PaymentPageRoutingModule\n  ],\n  declarations: [PaymentPage]\n})\nexport class PaymentPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {PaymentService} from '../services/payment.service'\nimport {PlayclipsService} from '../services/playclips.service'\nimport {Charge} from '../models/charge'\nimport { NavController } from '@ionic/angular'\n\n@Component({\n  selector: 'app-payment',\n  templateUrl: './payment.page.html',\n  styleUrls: ['./payment.page.scss'],\n})\nexport class PaymentPage implements OnInit {\n   constructor(private paymentService: PaymentService, private playclipsService: PlayclipsService, private navCtrl: NavController) {\n   }\n\n  ngOnInit() {\n  }\n  cvc: string = \"\";\n  charge: Charge = new Charge();\n\n  async chargeFn() {\n    this.paymentService.stripeToken(this.cvc).subscribe(response => {\n        console.log(response);\n    \tthis.charge.stripeToken = response; \n    });\n    await this.sleep(1000);\n    this.charge.amount =  this.playclipsService.playclip.price * 100;\n    this.charge.description =  this.playclipsService.playclip.title;\n    this.paymentService.chargeFn(this.charge).subscribe(response => {\n        console.log(response);\n    });\n    this.playclipsService.bought(this.playclipsService.playclip).subscribe(response => {\n        console.log(response);\n    });\n    this.navCtrl.navigateForward(\"tab4\")\n  }\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }  \n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport { Api } from '../api';\nimport { Charge } from '../models/charge';\nimport { SigninService } from './sign-in.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PaymentService {\n\n  constructor( private http: HttpClient, private api: Api, private signinService: SigninService ) {\n  }\n  stripeToken(cvc : string)  {\n    return  this.http.get(this.api.st + \"?jwt=\" +  this.signinService.jwt.token + \"&email=\"   + this.signinService.userDetails.email + \"&cvc=\" + cvc, {responseType: 'text'} )\n    .pipe(\n\t\t\tretry(2),\n\t\t\tcatchError(this.handleError));\n  }\n  chargeFn(charge): Observable<Charge>  {\n  return this.http.post<Charge>(this.api.charge + \"?jwt=\" + this.signinService.jwt.token, JSON.stringify(charge), this.signinService.httpOptionsAuth)\n    .pipe(\n    retry(2),\n    catchError(this.handleError));\n }\n\n\n\n   handleError(error: HttpErrorResponse) {\n\t\tif (error.error instanceof ErrorEvent) {\n\t\t// A client-side or network error occurred. Handle it accordingly.\n\t\t\t console.error('An error occurred:', error.error.message);\n\t\t} else {\n\t\t// The backend returned an unsuccessful response code.\n\t\t// The response body may contain clues as to what went wrong,\n\t\t\tconsole.error( `Backend returned code ${error.status}, ` + `body was: ${error.error}`);\n\t\t}\n\t\t// return an observable with a user-facing error message\n\t\treturn throwError( 'Something bad happened; please try again later.');\n\t}; \n}\n","import { Injectable } from '@angular/core';\nimport { Playclip } from '../models/playclip';\nimport { Observable, throwError } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport { Api } from '../api';\nimport { SigninService } from './sign-in.service';\nimport { HttpClient, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PlayclipsService {\n  httpOptions = {\n    headers: new HttpHeaders({\n   'Content-Type': 'application/json',\n  })\n }\n  status: any;\n  playclip: Playclip = new Playclip();\n  constructor(private http: HttpClient, private api : Api, private signInService : SigninService) { }\n  createPlayclips(playclip: Playclip) : Observable<Playclip> {\n     this.delete(playclip.id);\n     return this.http.post<Playclip>(this.api.playclips + \"?application=playclips\", JSON.stringify(playclip), this.signInService.httpOptionsAuth).pipe( retry(2), catchError(this.handleError));\n  }\n   getPlayclips() : Observable<Playclip> {\n    return this.http\n      .get<Playclip>(this.api.playclips, this.signInService.httpOptionsAuth)\n    .pipe(\n    retry(2),\n    catchError(this.handleError));\n\n   }\n   getPlayclip(id) : Observable<Playclip> {\n    return this.http\n      .get<Playclip>(this.api.playclips + \"/\" + id, this.signInService.httpOptionsAuth)\n    .pipe(\n    retry(2),\n    catchError(this.handleError));\n   }\n   delete(id: string): void { \n      this.http.delete(this.api.playclips + \"/\" + id, this.signInService.httpOptionsAuth)\n      .subscribe(() => this.status = 'Delete successful');\n    }\n\n  handleError(error: HttpErrorResponse) {\n  if (error.error instanceof ErrorEvent) {\n  // A client-side or network error occurred. Handle it accordingly.\n     console.error('An error occurred:', error.error.message);\n  } else {\n  // The backend returned an unsuccessful response code.\n  // The response body may contain clues as to what went wrong,\n    console.error( `Backend returned code ${error.status}, ` + `body was: ${error.error}`);\n  }\n  // return an observable with a user-facing error message\n  return throwError( 'Something bad happened; please try again later.');\n }; \n  archive(playclip) : Observable<Playclip> {\n        return  this.http.post<Playclip>(this.api.archiveplayclip, JSON.stringify(playclip), this.signInService.httpOptionsAuth).pipe(\n                                        retry(2),\n                                        catchError(this.handleError));\n        }\n  bought(playclip) : Observable<Playclip> {\n        return  this.http.post<Playclip>(this.api.boughtplayclip, JSON.stringify(playclip), this.signInService.httpOptionsAuth).pipe(\n                                        retry(2),\n                                        catchError(this.handleError));\n}\n purge(): void {\n   this.http.get(this.api.purgeplayclip,this.signInService.httpOptionsAuth)\n     .subscribe(() => this.status = 'Purge successful');\n  }\n}\n"],"names":["Component","PaymentService","PlayclipsService","Charge","NavController","PaymentPage","constructor","paymentService","playclipsService","navCtrl","ngOnInit","chargeFn","stripeToken","cvc","subscribe","response","console","log","charge","sleep","amount","playclip","price","description","title","bought","navigateForward","ms","Promise","resolve","setTimeout","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}